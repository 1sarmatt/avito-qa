# TESTCASES.md

---

## 1. Создание объявления

**Endpoint:** `POST /api/1/item`  
**Описание:** Сохранение нового объявления в систему

### TC-001: Успешное создание объявления с корректными данными
**Приоритет:** High  
**Категория:** Positive

**Предусловия:**

**Входные данные:**
```json
{
  "sellerID": 555123,
  "name": "iPhone 14 Pro",
  "price": 85000,
  "statistics": {
    "likes": 5,
    "viewCount": 120,
    "contacts": 8
  }
}
```

**Шаги:**
1. Отправить POST запрос на `/api/1/item` с корректным телом
2. Дождаться ответа

**Ожидаемый результат:**
- HTTP статус: 200 OK
- В ответе присутствуют поля: id, sellerId, name, price, statistics, createdAt
- ID объявления уникален
- Значения совпадают с отправленными данными

---

### TC-002: Создание объявления с минимально допустимыми данными
**Приоритет:** High  
**Категория:** Positive

**Входные данные:**
```json
{
  "sellerID": 555124,
  "name": "Книга",
  "price": 100,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

**Ожидаемый результат:**
- HTTP статус: 200 OK
- Объявление успешно создано с минимальными значениями

---

### TC-003: Создание объявления с большой ценой
**Приоритет:** Medium  
**Категория:** Positive

**Входные данные:**
```json
{
  "sellerID": 555125,
  "name": "Квартира в центре",
  "price": 99999999,
  "statistics": {
    "likes": 100,
    "viewCount": 5000,
    "contacts": 250
  }
}
```

**Ожидаемый результат:**
- HTTP статус: 200 OK
- Объявление создано с корректной ценой

---

### TC-004: Попытка создания объявления без поля name
**Приоритет:** High  
**Категория:** Negative

**Входные данные:**
```json
{
  "sellerID": 555126,
  "price": 50000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request
- В ответе сообщение об ошибке, указывающее на отсутствие поля name

---

### TC-005: Попытка создания объявления без поля price
**Приоритет:** High  
**Категория:** Negative

**Входные данные:**
```json
{
  "sellerID": 555127,
  "name": "Товар",
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request
- Сообщение об ошибке валидации

---

### TC-006: Попытка создания объявления с отрицательной ценой
**Приоритет:** High  
**Категория:** Negative

**Входные данные:**
```json
{
  "sellerID": 555128,
  "name": "Товар",
  "price": -1000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request
- Сообщение об ошибке валидации цены

---

### TC-007: Попытка создания объявления с отрицательным sellerID
**Приоритет:** Medium  
**Категория:** Negative

**Входные данные:**
```json
{
  "sellerID": -1,
  "name": "Товар",
  "price": 1000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request или 200 (в зависимости от требований)
- Проверить поведение при некорректном ID

---

### TC-008: Создание объявления с пустым именем
**Приоритет:** Medium  
**Категория:** Negative

**Входные данные:**
```json
{
  "sellerID": 555129,
  "name": "",
  "price": 1000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}
```

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request
- Сообщение об ошибке валидации

---

### TC-009: Попытка создания объявления с некорректным JSON
**Приоритет:** High  
**Категория:** Negative

**Входные данные:**
```
{invalid json}
```

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request
- Сообщение об ошибке парсинга JSON

---

### TC-010: Создание двух объявлений с одинаковыми данными
**Приоритет:** Medium  
**Категория:** Positive

**Входные данные:**
Два одинаковых запроса:
```json
{
  "sellerID": 555130,
  "name": "Товар",
  "price": 5000,
  "statistics": {
    "likes": 10,
    "viewCount": 100,
    "contacts": 5
  }
}
```

**Ожидаемый результат:**
- Оба объявления созданы успешно
- Каждое имеет уникальный ID
- Остальные поля идентичны

---

## 2. Получение объявления по ID

**Endpoint:** `GET /api/1/item/:id`  
**Описание:** Получение информации о конкретном объявлении

### TC-201: Получение существующего объявления
**Приоритет:** High  
**Категория:** Positive

**Предусловия:**
- Объявление с ID существует в системе (создано в TC-001)

**Шаги:**
1. Выполнить GET запрос на `/api/1/item/{valid_id}`

**Ожидаемый результат:**
- HTTP статус: 200 OK
- В ответе все поля объявления (id, sellerId, name, price, statistics, createdAt)
- Данные соответствуют созданному объявлению

---

### TC-202: Получение объявления с несуществующим ID
**Приоритет:** High  
**Категория:** Negative

**Входные данные:**
- ID: "nonexistent-id-12345"

**Ожидаемый результат:**
- HTTP статус: 404 Not Found
- Сообщение об ошибке

---

### TC-203: Получение объявления с пустым ID
**Приоритет:** Medium  
**Категория:** Negative

**Входные данные:**
- ID: "" (пустая строка)

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request или 404 Not Found
- Обработка ошибки

---

### TC-204: Получение объявления с некорректным форматом ID
**Приоритет:** Medium  
**Категория:** Negative

**Входные данные:**
- ID: "!@#$%^&*()"

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request или 404 Not Found
- Обработка ошибки

---

### TC-205: Получение объявления после его удаления
**Приоритет:** High  
**Категория:** Negative

**Предусловия:**
- Объявление создано
- Объявление удалено

**Шаги:**
1. GET запрос на ID удаленного объявления

**Ожидаемый результат:**
- HTTP статус: 404 Not Found
- Сообщение об ошибке

---

## 3. Получение всех объявлений пользователя

**Endpoint:** `GET /api/1/:sellerID/item`  
**Описание:** Получение списка всех объявлений конкретного продавца

### TC-301: Получение объявлений пользователя с несколькими объявлениями
**Приоритет:** High  
**Категория:** Positive

**Предусловия:**
- Пользователь с ID 555131 имеет 3+ объявления

**Шаги:**
1. Выполнить GET запрос на `/api/1/555131/item`

**Ожидаемый результат:**
- HTTP статус: 200 OK
- Возвращается массив объявлений
- Количество объявлений соответствует ожидаемому
- Все объявления принадлежат пользователю с ID 555131

---

### TC-302: Получение объявлений пользователя без объявлений
**Приоритет:** High  
**Категория:** Positive

**Предусловия:**
- Пользователь с ID 555132 не имеет объявлений

**Ожидаемый результат:**
- HTTP статус: 200 OK
- Возвращается пустой массив []

---

### TC-303: Получение объявлений несуществующего пользователя
**Приоритет:** Medium  
**Категория:** Negative

**Входные данные:**
- sellerID: 999999999

**Ожидаемый результат:**
- HTTP статус: 200 OK с пустым массивом или 404 Not Found
- Проверить консистентность поведения

---

### TC-304: Получение объявлений с отрицательным sellerID
**Приоритет:** Medium  
**Категория:** Negative

**Входные данные:**
- sellerID: -1

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request или 404 Not Found
- Обработка ошибки

---

### TC-305: Получение объявлений с некорректным sellerID
**Приоритет:** Medium  
**Категория:** Negative

**Входные данные:**
- sellerID: "abc123"

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request
- Сообщение об ошибке валидации

---

### TC-306: Проверка полей в возвращаемых объявлениях
**Приоритет:** High  
**Категория:** Positive

**Предусловия:**
- У пользователя есть объявления

**Ожидаемый результат:**
- Каждое объявление содержит все обязательные поля
- Структура данных соответствует спецификации

---

## 4. Получение статистики по объявлению

**Endpoint:** `GET /api/1/statistic/:id` или `GET /api/2/statistic/:id`  
**Описание:** Получение статистики (лайки, просмотры, контакты)

### TC-401: Получение статистики существующего объявления
**Приоритет:** High  
**Категория:** Positive

**Предусловия:**
- Объявление с ID существует

**Шаги:**
1. GET запрос на `/api/1/statistic/{item_id}`

**Ожидаемый результат:**
- HTTP статус: 200 OK
- В ответе массив с полями: likes, viewCount, contacts
- Значения соответствуют статистике объявления

---

### TC-402: Получение статистики с несуществующим ID
**Приоритет:** High  
**Категория:** Negative

**Входные данные:**
- ID: "nonexistent-stat-id"

**Ожидаемый результат:**
- HTTP статус: 404 Not Found
- Сообщение об ошибке

---

### TC-403: Получение статистики через API v2
**Приоритет:** Medium  
**Категория:** Positive

**Шаги:**
1. GET запрос на `/api/2/statistic/{item_id}`

**Ожидаемый результат:**
- HTTP статус: 200 OK
- Данные соответствуют v1

---

### TC-404: Получение статистики с пустым ID
**Приоритет:** Medium  
**Категория:** Negative

**Входные данные:**
- ID: ""

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request или 404 Not Found

---

### TC-405: Проверка точности статистики после создания объявления
**Приоритет:** High  
**Категория:** Positive

**Предусловия:**
- Объявление создано с известной статистикой

**Шаги:**
1. Создать объявление со статистикой
2. Получить статистику через endpoint
3. Сравнить значения

**Ожидаемый результат:**
- Значения в статистике совпадают с исходными данными

---

## 5. Удаление объявления

**Endpoint:** `DELETE /api/2/item/:id`  
**Описание:** Удаление объявления из системы

### TC-501: Успешное удаление существующего объявления
**Приоритет:** High  
**Категория:** Positive

**Предусловия:**
- Объявление с ID существует

**Шаги:**
1. DELETE запрос на `/api/2/item/{item_id}`
2. Получить объявление по ID (должно вернуть 404)

**Ожидаемый результат:**
- HTTP статус: 200 OK при удалении
- HTTP статус: 404 Not Found при попытке получить удаленное объявление

---

### TC-502: Попытка удаления несуществующего объявления
**Приоритет:** Medium  
**Категория:** Negative

**Входные данные:**
- ID: "nonexistent-delete-id"

**Ожидаемый результат:**
- HTTP статус: 404 Not Found
- Сообщение об ошибке

---

### TC-503: Удаление одного объявления из нескольких
**Приоритет:** High  
**Категория:** Positive

**Предусловия:**
- Пользователь имеет 3 объявления
- Выбрано одно для удаления

**Шаги:**
1. DELETE запрос на первое объявление
2. GET запрос на список всех объявлений пользователя

**Ожидаемый результат:**
- Удаленное объявление не возвращается в списке
- Остальные объявления на месте

---

### TC-504: Попытка удаления дважды
**Приоритет:** Medium  
**Категория:** Negative

**Предусловия:**
- Объявление создано и удалено

**Шаги:**
1. DELETE запрос на уже удаленное объявление

**Ожидаемый результат:**
- HTTP статус: 404 Not Found
- Сообщение об ошибке

---

### TC-505: Удаление с некорректным ID
**Приоритет:** Medium  
**Категория:** Negative

**Входные данные:**
- ID: "!@#$%"

**Ожидаемый результат:**
- HTTP статус: 400 Bad Request или 404 Not Found

---

## Итоговая матрица покрытия

| Функция | Positive | Negative | Итого |
|---------|----------|----------|-------|
| Создание | 4 | 6 | 10 |
| Получение по ID | 1 | 4 | 5 |
| Получение списка | 3 | 2 | 5 |
| Статистика | 3 | 2 | 5 |
| Удаление | 3 | 3 | 6 |
| **ИТОГО** | **14** | **17** | **31** |

